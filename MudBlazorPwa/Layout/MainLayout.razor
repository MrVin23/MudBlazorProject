@inherits LayoutComponentBase
@* Required *@
<MudThemeProvider />
<MudPopoverProvider />
@* Needed for dialogs *@
<MudDialogProvider />
@* Needed for snackbars *@

<MudSnackbarProvider />
<div class="tw-min-h-screen tw-bg-gray-50">
    <!-- Sidebar -->
    <div class="tw-fixed tw-inset-y-0 tw-left-0 tw-z-50 tw-w-64 tw-bg-white tw-shadow-lg tw-transform tw-transition-transform tw-duration-300 tw-ease-in-out" 
         style="@(sidebarOpen ? "transform: translateX(0);" : "transform: translateX(-100%);")">
        <NavMenu />
    </div>

    <!-- Main Content -->
    <div class="tw-flex tw-flex-col tw-min-h-screen" style="@(sidebarOpen ? "margin-left: 16rem;" : "margin-left: 0;")">
        <!-- Top Navigation -->
        <header class="tw-bg-white tw-shadow-sm tw-border-b tw-border-gray-200">
            <div class="tw-flex tw-items-center tw-justify-between tw-px-6 tw-py-4">
                <div class="tw-flex tw-items-center tw-space-x-4">
                    <button @onclick="ToggleSidebar" 
                            class="tw-p-2 tw-rounded-md tw-text-gray-600 hover:tw-text-gray-900 hover:tw-bg-gray-100 tw-transition-colors">
                        <svg class="tw-w-6 tw-h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                    <h1 class="tw-text-xl tw-font-semibold tw-text-gray-900">MudBlazor PWA</h1>
                </div>
                
                <div class="tw-flex tw-items-center tw-space-x-4">
                    <a href="https://learn.microsoft.com/aspnet/core/" target="_blank" 
                       class="tw-text-gray-600 hover:tw-text-gray-900 tw-transition-colors">
                        About
                    </a>
                </div>
            </div>
        </header>

        <!-- Page Content -->
        <main class="tw-flex-1 tw-p-6">
            @Body
        </main>
    </div>

    <!-- Overlay for mobile -->
    @if (sidebarOpen)
    {
        <div class="tw-fixed tw-inset-0 tw-bg-black tw-bg-opacity-50 tw-z-40 tw-block md:tw-hidden" 
             @onclick="ToggleSidebar"></div>
    }
</div>

@code {
    private bool sidebarOpen = false;

    private void ToggleSidebar()
    {
        sidebarOpen = !sidebarOpen;
    }
}
